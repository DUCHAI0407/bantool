<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Shop Bán Tool Tự Động</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    body { background: #f4f4f4; }
    .product { margin-bottom: 20px; }
    .card { height: 100%; }
  </style>
</head>
<body>

<div class="container my-5">
  <h1 class="text-center mb-4">Shop Bán Tool Tự Động</h1>
  <div class="row" id="product-list"></div>
</div>

<!-- Modal mua hàng -->
<div class="modal fade" id="buyModal" tabindex="-1" aria-labelledby="buyModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Mua Tool</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
      </div>
      <div class="modal-body">
        <p id="productName"></p>
        <p id="productPrice"></p>
        <p><strong>Chuyển khoản tới:</strong><br>
          Ngân hàng: <b>Vietcombank</b><br>
          STK: <b>1048868033</b><br>
          Chủ TK: <b>DAO DUC HAI</b><br>
          Nội dung chuyển khoản: <span id="orderCode"></span>
        </p>
        <div class="text-center my-3">
          <canvas id="qrCanvas"></canvas>
          <p><small>Quét mã để chuyển khoản nhanh</small></p>
        </div>
        <div class="text-center mb-3">
          <p><strong>Telegram liên hệ: @haireal_ios</strong></p>
          <a href="https://t.me/haireal_ios" target="_blank" class="btn btn-info">Nhắn Telegram</a>
        </div>
        <button class="btn btn-success w-100" onclick="confirmPayment()">Tôi đã chuyển khoản</button>
      </div>
    </div>
  </div>
</div>

<!-- Admin khu vực ẩn -->
<div id="admin-area" class="container my-5" style="display:none;">
  <h2 class="text-center">Quản Lý Đơn Hàng</h2>
  <div id="order-list" class="mt-4"></div>
</div>

<script>
// Danh sách sản phẩm
const products = [
  { id: 1, name: "Tool Auto Facebook", price: 50000 },
  { id: 2, name: "Tool Auto TikTok", price: 70000 },
  { id: 3, name: "Tool Auto Instagram", price: 60000 },
  { id: 4, name: "Tool Spam Zalo", price: 45000 },
  { id: 5, name: "Tool Check Mail", price: 80000 },
  { id: 6, name: "Tool Auto Inbox", price: 90000 },
  { id: 7, name: "Tool Up View YouTube", price: 120000 },
  { id: 8, name: "Tool Tăng Follow", price: 75000 },
  { id: 9, name: "Tool Lọc Bạn Bè", price: 35000 },
  { id: 10, name: "Tool Reg Clone", price: 100000 }
];

let selectedProduct = null;

// Hiển thị sản phẩm
const list = document.getElementById('product-list');
products.forEach(p => {
  const div = document.createElement('div');
  div.className = 'col-md-4 product';
  div.innerHTML = `
    <div class="card shadow-sm">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">${p.name}</h5>
        <p class="card-text">${p.price.toLocaleString()} VNĐ</p>
        <button class="btn btn-primary mt-auto" onclick="buy(${p.id})">Mua ngay</button>
      </div>
    </div>
  `;
  list.appendChild(div);
});

// Mua hàng
function buy(id) {
  selectedProduct = products.find(p => p.id === id);
  if (selectedProduct) {
    const code = 'MUA' + selectedProduct.id + '-' + Date.now();
    document.getElementById('productName').innerText = "Tên tool: " + selectedProduct.name;
    document.getElementById('productPrice').innerText = "Giá: " + selectedProduct.price.toLocaleString() + " VNĐ";
    document.getElementById('orderCode').innerText = code;

    // Tạo QR nội dung
    const qrText = `Ngân hàng: Vietcombank\nSTK: 1048868033\nChủ TK: DAO DUC HAI\nNội dung: ${code}\nSố tiền: ${selectedProduct.price}`;
    const canvas = document.getElementById('qrCanvas');
    QRCode.toCanvas(canvas, qrText, function (error) {
      if (error) console.error(error);
    });

    const myModal = new bootstrap.Modal(document.getElementById('buyModal'));
    myModal.show();
  }
}

// Xác nhận thanh toán
function confirmPayment() {
  const code = document.getElementById('orderCode').innerText;
  const orders = JSON.parse(localStorage.getItem('orders') || '[]');
  orders.push({
    id: Date.now(),
    product: selectedProduct.name,
    price: selectedProduct.price,
    code: code,
    status: 'Chờ kiểm tra'
  });
  localStorage.setItem('orders', JSON.stringify(orders));
  alert('Đã lưu đơn hàng! Admin sẽ kiểm tra và giao tool qua Telegram hoặc Email.');
  location.reload();
}

// Bấm Ctrl + A để mở khu vực admin
document.addEventListener('keydown', function(e) {
  if (e.ctrlKey && e.key === 'a') {
    showAdmin();
  }
});

// Admin hiển thị đơn hàng
function showAdmin() {
  document.getElementById('admin-area').style.display = 'block';
  const orders = JSON.parse(localStorage.getItem('orders') || '[]');
  const orderList = document.getElementById('order-list');
  if (orders.length === 0) {
    orderList.innerHTML = "<p>Chưa có đơn hàng nào.</p>";
    return;
  }
  orderList.innerHTML = orders.map(o => `
    <div class="card mb-3">
      <div class="card-body">
        <h5>${o.product}</h5>
        <p>Giá: ${o.price.toLocaleString()} VNĐ</p>
        <p>Nội dung chuyển khoản: <b>${o.code}</b></p>
        <p>Trạng thái: ${o.status}</p>
      </div>
    </div>
  `).join('');
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>